---
import NavLink from './NavLink.astro';
---

<nav id="navbar" class="fixed w-full z-50 transition-all duration-300 scrolled-nav shadow-md">
  <div class="max-w-7xl mx-auto flex justify-between items-center px-6 py-4">
    <!-- Logo -->
    <a href="/" class="flex items-center space-x-3">
      <img src="/images/logo.png" alt="MicroPig Logo" class="h-20 w-auto">
      <div class="flex flex-col">
        <span class="text-xl font-bold text-[#7A0019]">MicroPig</span>
        <span class="text-xs text-[#7A0019]/70 tracking-wide">Swine Microbiome Research</span>
      </div>
    </a>

    <!-- Desktop Menu -->
    <div class="hidden md:flex space-x-8">
      <NavLink href="/#hero" text="Home" />
      <NavLink href="/#research" text="Research" />
      <NavLink href="/#impact" text="Impact" />
      <NavLink href="/#approach" text="Our Approach" />
      <NavLink href="/#team" text="Team" />
      <NavLink href="/#resources" text="Resources" />
      <NavLink href="/video" text= "videos" />
      <NavLink href="/blog" text="Blog" />
      <NavLink href="/#contact" text="Contact" />
    </div>

    <!-- Mobile Button -->
    <button id="menu-button" class="md:hidden focus:outline-none text-[#7A0019]">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
  </div>
</nav>

<!-- Mobile Menu -->
<div id="mobile-menu" class="fixed inset-0 bg-black bg-opacity-50 z-40 transform translate-x-full transition-transform duration-300 ease-in-out">
  <div class="absolute right-0 top-0 h-full w-4/5 max-w-sm bg-white shadow-xl flex flex-col">
    <div class="flex justify-between items-center p-6 border-b border-[#FFCC33]/30 bg-[#FFCC33]/20">
      <a href="/" class="flex items-center space-x-3">
        <img src="/images/logo.png" alt="MicroPig Logo" class="h-10 w-auto">
        <div class="flex flex-col">
          <span class="text-xl font-bold text-[#7A0019]">MicroPig</span>
          <span class="text-xs text-[#7A0019]/70 tracking-wide">Swine Microbiome Research</span>
        </div>
      </a>
      <button id="close-menu-button" class="text-[#7A0019] hover:text-[#500010] focus:outline-none">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <div class="flex-1 overflow-y-auto p-6">
      <nav class="flex flex-col space-y-4">
        <a href="/#hero" class="mobile-link">Home</a>
        <a href="/#research" class="mobile-link">Research</a>
        <a href="/#impact" class="mobile-link">Impact</a>
        <a href="/#approach" class="mobile-link">Our Approach</a>
        <a href="/#team" class="mobile-link">Team</a>
        <a href="/#resources" class="mobile-link">Resources</a>
        <a href="/blog" class="mobile-link">Blog</a>
        <a href="/#contact" class="mobile-link">Contact</a>
      </nav>
    </div>
  </div>
</div>

<style>
.scrolled-nav {
  background-color: rgba(255, 204, 51, 0.95) !important;
  backdrop-filter: blur(5px);
}

/* Mobile Link style */
.mobile-link {
  @apply text-lg font-medium py-3 px-2 border-b border-gray-100 flex justify-between items-center hover:bg-[#FFCC33]/10 hover:text-[#7A0019] transition-colors rounded-lg;
}
</style>

<script type="text/javascript">
  window.addEventListener('DOMContentLoaded', () => {
    const menuButton = document.getElementById('menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const closeMenuButton = document.getElementById('close-menu-button');
    const navbar = document.getElementById('navbar');

    menuButton.addEventListener('click', () => {
      mobileMenu.classList.remove('translate-x-full');
    });

    closeMenuButton.addEventListener('click', () => {
      mobileMenu.classList.add('translate-x-full');
    });

    window.addEventListener('scroll', () => {
      if (window.scrollY > 10) {
        navbar.classList.add('scrolled-nav');
      }
    });
  });
</script>
